<!DOCTYPE html>
<html>
<head>
    <title>简单测试</title>
</head>
<body>
    <div id="result">测试开始...</div>
    <div id="waterfallGrid"></div>
    
    <script>
        document.getElementById('result').innerHTML += '<br>DOM加载完成';
        
        // 简单的测试函数
        async function simpleTest() {
            try {
                document.getElementById('result').innerHTML += '<br>开始API测试';
                
                const response = await fetch('/api/images?page=1&limit=2');
                document.getElementById('result').innerHTML += '<br>API响应状态: ' + response.status;
                
                if (response.ok) {
                    const images = await response.json();
                    document.getElementById('result').innerHTML += '<br>获取到图片数量: ' + images.length;
                    
                    const grid = document.getElementById('waterfallGrid');
                    images.forEach((image, index) => {
                        const div = document.createElement('div');
                        div.innerHTML = `<img src="${image.image_url}" style="width: 100px; height: auto;"><br>${image.title}`;
                        grid.appendChild(div);
                    });
                    document.getElementById('result').innerHTML += '<br>渲染完成';
                } else {
                    document.getElementById('result').innerHTML += '<br>API请求失败';
                }
            } catch (error) {
                document.getElementById('result').innerHTML += '<br>错误: ' + error.message;
            }
        }
        
        // 等待一小段时间确保DOM完全加载
        setTimeout(simpleTest, 1000);
    </script>
</body>
</html>